
<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üåø B·∫£ng tra c·ª©u ch·ªâ s·ªë c√¢y tr·ªìng</title>
<style>
  :root{
    --bg:#eefcf0;
    --card:#fff;
    --accent:#14642a;
    --muted:#616161;
    --hover:#dff7df;
    --shadow: 0 6px 18px rgba(0,0,0,0.06);
  }
  html,body{height:100%;margin:0;font-family:"Segoe UI","Segoe UI Emoji","Noto Color Emoji",system-ui,sans-serif;background:var(--bg);color:#0b3b2e;}
  .wrap{max-width:980px;margin:28px auto;padding:14px;}
  h1{text-align:center;color:var(--accent);margin:8px 0 16px;}
  .card{background:var(--card);border-radius:14px;padding:18px;box-shadow:var(--shadow);}
  .controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;}
  label{font-weight:600;color:var(--accent);}
  input.search{padding:9px 10px;border-radius:10px;border:1px solid #dbeeda;min-width:260px;transition:box-shadow .18s, border-color .18s;}
  input.search:focus{outline:none;border-color:#78d28e;box-shadow:0 0 0 6px rgba(120,210,142,0.12);}
  /* custom dropdown */
  .custom-select{position:relative;min-width:250px;}
  .select-btn{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:9px 10px;border-radius:10px;border:1px solid #dbeeda;background:#fff;cursor:pointer;}
  .select-btn .left{display:flex;align-items:center;gap:10px;}
  .select-btn .emoji{font-size:20px}
  .list{position:absolute;left:0;right:0;top:calc(100% + 8px);background:#fff;border:1px solid #e6f3e9;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.08);max-height:260px;overflow:auto;z-index:50;display:none;}
  .list.open{display:block;}
  .item{display:flex;align-items:center;gap:10px;padding:8px 10px;cursor:pointer;}
  .item:hover{background:var(--hover);}
  .item .emoji{width:28px;text-align:center;font-size:18px;}
  .item small{margin-left:auto;color:var(--muted);font-style:italic;}
  /* suggestions under search */
  .suggestions{position:absolute;left:0;right:0;top:calc(100% + 8px);background:#fff;border:1px solid #e1f3df;border-radius:8px;box-shadow:0 8px 20px rgba(0,0,0,0.06);max-height:220px;overflow:auto;z-index:60;display:none;}
  .suggestions .sitem{padding:8px 10px;cursor:pointer;}
  .suggestions .sitem:hover{background:var(--hover);}
  /* plant display */
  .plant-block{text-align:center;margin-top:18px;}
  .plant-block .big-emoji{font-size:46px}
  .plant-block h2{margin:8px 0 4px;color:var(--accent);}
  .scientific{font-style:italic;color:#2e7d32;margin-bottom:8px;}
  table{width:100%;border-collapse:collapse;margin-top:10px;}
  th,td{padding:12px 14px;text-align:left;border-bottom:1px solid #eef7ee;transition:background .18s;}
  th{background:#bfe7c9;color:#0b4a2b;}
  tbody tr:hover td{background:var(--hover);} /* highlight xanh nh·∫°t */
  .note{margin-top:10px;font-style:italic;color:var(--muted);}
  @media (max-width:720px){
    .controls{flex-direction:column;align-items:stretch;}
    .custom-select,input.search{width:100%;}
    .select-btn{justify-content:flex-start;}
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>üåæ B·∫¢NG TRA C·ª®U CH·ªà S·ªê C√ÇY TR·ªíNG</h1>
    <div class="card">
      <div class="controls" aria-label="controls">
        <label>üîç T√¨m c√¢y:</label>
        <div style="position:relative; flex:1; min-width:220px;">
          <input id="search" class="search" placeholder="G√µ t√™n c√¢y (v√≠ d·ª•: ·ªõt, lan, c√¢y kh√¥ng kh√≠)"/>
          <div id="suggestions" class="suggestions" aria-hidden="true"></div>
        </div>

        <label>Ho·∫∑c ch·ªçn c√¢y:</label>
        <div class="custom-select" id="customSelect">
          <div id="selectBtn" class="select-btn" role="button" tabindex="0" aria-expanded="false" aria-haspopup="listbox">
            <div class="left"><span id="selEmoji" class="emoji">üåø</span><span id="selText">Ch·ªçn c√¢y</span></div>
            <div class="chev">‚ñæ</div>
          </div>
          <div id="list" class="list" role="listbox"></div>
        </div>
      </div>

      <div id="plant" class="plant-block" aria-live="polite">
        <div class="big-emoji" id="pEmoji">üåø</div>
        <h2 id="pName">C√¢y tr·ªìng</h2>
        <div class="scientific" id="pSci"></div>
      </div>

      <table aria-describedby="note">
        <thead><tr><th>Th√¥ng s·ªë</th><th>Gi√° tr·ªã ph√π h·ª£p</th></tr></thead>
        <tbody id="infoBody"></tbody>
      </table>

      <div id="note" class="note"></div>
    </div>
  </div>

<script>
/* FULL DATA: old plants + requested 5 new ones */
const plantList = [
  { id:"rice", emoji:"üåæ", name:"L√∫a", scientific:"Oryza sativa", note:"L√∫a ∆∞a ·∫©m, c·∫ßn nhi·ªÅu n∆∞·ªõc.", info:{
    "√Ånh s√°ng":"Tr·ª±c ti·∫øp ‚Äì 40.000‚Äì80.000 lux", "Nhi·ªát ƒë·ªô":"25‚Äì35¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"70‚Äì90%", "pH":"5.5‚Äì6.5", "T∆∞·ªõi":"Gi·ªØ ng·∫≠p giai ƒëo·∫°n sinh tr∆∞·ªüng"
  }},
  { id:"tomato", emoji:"üçÖ", name:"C√† chua", scientific:"Solanum lycopersicum", note:"C·∫ßn ƒë·∫•t t∆°i x·ªëp, nhi·ªÅu dinh d∆∞·ª°ng.", info:{
    "√Ånh s√°ng":"6‚Äì8 gi·ªù/ng√†y ‚Äì 30.000‚Äì50.000 lux", "Nhi·ªát ƒë·ªô":"22‚Äì28¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"60‚Äì70%", "pH":"6.0‚Äì6.8", "T∆∞·ªõi":"V·ª´a ph·∫£i, tr√°nh √∫ng"
  }},
  { id:"lettuce", emoji:"ü•¨", name:"X√† l√°ch", scientific:"Lactuca sativa", note:"∆Øa m√°t, ph√°t tri·ªÉn nhanh.", info:{
    "√Ånh s√°ng":"Trung b√¨nh ‚Äì 15.000‚Äì25.000 lux", "Nhi·ªát ƒë·ªô":"18‚Äì24¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"60‚Äì80%", "pH":"6.0‚Äì7.0", "T∆∞·ªõi":"Gi·ªØ ·∫©m li√™n t·ª•c"
  }},
  { id:"chili", emoji:"üå∂Ô∏è", name:"·ªöt", scientific:"Capsicum annuum", note:"C·∫ßn nhi·ªÅu √°nh s√°ng v√† nhi·ªát ƒë·ªô ·∫•m.", info:{
    "√Ånh s√°ng":"Nhi·ªÅu ‚Äì 25.000‚Äì40.000 lux", "Nhi·ªát ƒë·ªô":"25‚Äì32¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"50‚Äì70%", "pH":"6.0‚Äì6.8", "T∆∞·ªõi":"V·ª´a ph·∫£i"
  }},
  { id:"cucumber", emoji:"ü•í", name:"D∆∞a leo", scientific:"Cucumis sativus", note:"C·∫ßn ƒë·∫•t gi√†u dinh d∆∞·ª°ng, ·∫©m nh∆∞ng tho√°t n∆∞·ªõc t·ªët.", info:{
    "√Ånh s√°ng":"6‚Äì8 gi·ªù/ng√†y ‚Äì 20.000‚Äì30.000 lux", "Nhi·ªát ƒë·ªô":"24‚Äì30¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"65‚Äì80%", "pH":"6.0‚Äì7.0", "T∆∞·ªõi":"ƒê·ªÅu ƒë·∫∑n"
  }},
  { id:"rose", emoji:"üåπ", name:"Hoa H·ªìng", scientific:"Rosa spp.", note:"∆Øa n·∫Øng, ƒë·∫•t t∆°i x·ªëp.", info:{
    "√Ånh s√°ng":"Nhi·ªÅu (tr·ª±c ti·∫øp)", "Nhi·ªát ƒë·ªô":"25‚Äì32¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"50‚Äì70%", "pH":"6.0‚Äì6.8", "T∆∞·ªõi":"2‚Äì3 l·∫ßn/tu·∫ßn"
  }},
  // NEW: C√¢y kh√¥ng kh√≠
  { id:"airplant", emoji:"üåø", name:"C√¢y kh√¥ng kh√≠", scientific:"Tillandsia spp.", note:"Kh√¥ng c·∫ßn ƒë·∫•t, h·∫•p thu h∆°i ·∫©m.", info:{
    "√Ånh s√°ng":"Gi√°n ti·∫øp ‚Äì 10.000‚Äì20.000 lux", "Nhi·ªát ƒë·ªô":"18‚Äì30¬∞C", "ƒê·ªô ·∫©m kh√≠":"50‚Äì80%", "T∆∞·ªõi":"Phun s∆∞∆°ng 2‚Äì3 l·∫ßn/tu·∫ßn"
  }},
  // Dendrobium
  { id:"dendrobium", emoji:"üå∏", name:"Phong lan Dendrobium", scientific:"Dendrobium spp.", note:"Th√≠ch n∆°i tho√°ng, s√°ng t√°n x·∫°.", info:{
    "√Ånh s√°ng":"S√°ng nh·∫π ‚Äì 15.000‚Äì25.000 lux", "Nhi·ªát ƒë·ªô":"20‚Äì30¬∞C", "ƒê·ªô ·∫©m":"60‚Äì80%", "T∆∞·ªõi":"Khi gi√° th·ªÉ kh√¥"
  }},
  // Phalaenopsis
  { id:"phalaenopsis", emoji:"üíÆ", name:"Phong lan H·ªì ƒêi·ªáp", scientific:"Phalaenopsis spp.", note:"∆Øa m√°t, tr√°nh n·∫Øng tr·ª±c ti·∫øp.", info:{
    "√Ånh s√°ng":"Khu·∫øch t√°n ‚Äì 10.000‚Äì15.000 lux", "Nhi·ªát ƒë·ªô":"18‚Äì28¬∞C", "ƒê·ªô ·∫©m":"60‚Äì80%", "T∆∞·ªõi":"2‚Äì3 l·∫ßn/tu·∫ßn"
  }},
  // Bird's nest fern
  { id:"birdnestfern", emoji:"üå±", name:"D∆∞∆°ng x·ªâ t·ªï chim", scientific:"Asplenium nidus", note:"∆Øa b√≥ng v√† ƒë·ªô ·∫©m cao.", info:{
    "√Ånh s√°ng":"T√°n x·∫° ‚Äì 5.000‚Äì15.000 lux", "Nhi·ªát ƒë·ªô":"20‚Äì28¬∞C", "ƒê·ªô ·∫©m ƒë·∫•t":"60‚Äì80%", "T∆∞·ªõi":"Gi·ªØ ·∫©m ƒë·ªÅu, tr√°nh ng·∫≠p"
  }},
  // Cattleya
  { id:"cattleya", emoji:"üåº", name:"Phong lan Cattleya", scientific:"Cattleya spp.", note:"C·∫ßn s√°ng nhi·ªÅu v√† tho√°ng.", info:{
    "√Ånh s√°ng":"M·∫°nh nh∆∞ng t√°n x·∫° ‚Äì 20.000‚Äì30.000 lux", "Nhi·ªát ƒë·ªô":"22‚Äì32¬∞C", "ƒê·ªô ·∫©m":"60‚Äì80%", "T∆∞·ªõi":"3‚Äì4 l·∫ßn/tu·∫ßn"
  }}
];

/* UI elements */
const selectBtn = document.getElementById('selectBtn');
const listEl = document.getElementById('list');
const selEmoji = document.getElementById('selEmoji');
const selText = document.getElementById('selText');
const searchEl = document.getElementById('search');
const suggestions = document.getElementById('suggestions');
const pEmoji = document.getElementById('pEmoji');
const pName = document.getElementById('pName');
const pSci = document.getElementById('pSci');
const infoBody = document.getElementById('infoBody');
const noteEl = document.getElementById('note');

/* Build custom dropdown list (with emoji + scientific on right) */
function buildList(filter=''){
  listEl.innerHTML='';
  const q=filter.trim().toLowerCase();
  plantList.forEach((p, idx) => {
    const label = `${p.emoji} ${p.name}`;
    if(q){
      const hay = (p.name + ' ' + p.scientific + ' ' + p.id).toLowerCase();
      if(!hay.includes(q)) return;
    }
    const item = document.createElement('div');
    item.className = 'item';
    item.dataset.idx = idx;
    item.innerHTML = `<span class="emoji">${p.emoji}</span><span class="txt">${p.name}</span><small>${p.scientific}</small>`;
    item.addEventListener('click', ()=> {
      listEl.classList.remove('open');
      selectBtn.setAttribute('aria-expanded','false');
      chooseIndex(idx);
    });
    listEl.appendChild(item);
  });
}

/* Build suggestions for search box */
function buildSuggestions(q){
  suggestions.innerHTML='';
  if(!q){ suggestions.style.display='none'; return; }
  const matches = plantList.filter(p => {
    const hay = (p.name + ' ' + p.scientific + ' ' + p.id).toLowerCase();
    return hay.includes(q.toLowerCase());
  });
  if(matches.length === 0){ suggestions.style.display='none'; return; }
  matches.forEach((p, idx) => {
    const div = document.createElement('div');
    div.className = 'sitem';
    div.textContent = `${p.emoji} ${p.name}`;
    div.addEventListener('click', ()=> {
      searchEl.value = p.name;
      suggestions.style.display='none';
      chooseById(p.id);
    });
    suggestions.appendChild(div);
  });
  suggestions.style.display = 'block';
  // if only 1 match, auto choose it
  if(matches.length === 1){
    chooseById(matches[0].id);
  }
}

/* Choose and render plant by index */
function chooseIndex(idx){
  const p = plantList[idx];
  if(!p) return;
  selEmoji.textContent = p.emoji; selText.textContent = p.name;
  renderPlant(p);
  selectBtn.dataset.current = idx;
}

/* Choose by ID (string id) */
function chooseById(id){
  const idx = plantList.findIndex(x => x.id === id || x.name === id);
  if(idx >= 0) chooseIndex(idx);
}

/* Render plant info */
function renderPlant(p){
  pEmoji.textContent = p.emoji;
  pName.textContent = p.name;
  pSci.textContent = p.scientific ? `(${p.scientific})` : '';
  infoBody.innerHTML = '';
  for(const [k,v] of Object.entries(p.info)){
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${k}</td><td>${v}</td>`;
    infoBody.appendChild(tr);
  }
  noteEl.textContent = p.note || '';
}

/* Toggle dropdown open/close */
selectBtn.addEventListener('click', ()=>{
  const open = listEl.classList.toggle('open');
  selectBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
  if(open){
    // scroll selected into view
    const cur = selectBtn.dataset.current;
    if(cur != null){
      const el = listEl.querySelector(`[data-idx="${cur}"]`);
      if(el) el.scrollIntoView({block:'nearest'});
    }
  }
});

/* Close if click outside */
document.addEventListener('click', (e)=>{
  if(!document.getElementById('customSelect').contains(e.target) && e.target !== searchEl){
    listEl.classList.remove('open');
    suggestions.style.display='none';
    selectBtn.setAttribute('aria-expanded','false');
  }
});

/* Search input live */
searchEl.addEventListener('input', (e)=>{
  const q = e.target.value.trim();
  buildSuggestions(q);
  // Also filter dropdown list visually
  buildList(q);
});

/* Keyboard: Enter on search = choose exact match if exists */
searchEl.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter'){
    const q = searchEl.value.trim().toLowerCase();
    if(!q) return;
    // try exact name match (ignoring emoji prefix)
    const found = plantList.find(p => p.name.toLowerCase() === q || p.name.replace(/[^a-zA-Z0-9\s]/g,'').toLowerCase() === q);
    if(found) {
      chooseById(found.id);
      suggestions.style.display='none';
      listEl.classList.remove('open');
    } else {
      // if single suggestion exists, pick it
      const matches = plantList.filter(p => (p.name + ' ' + p.scientific + ' ' + p.id).toLowerCase().includes(q));
      if(matches.length === 1) chooseById(matches[0].id);
    }
  }
});

/* Build initial list and choose a random plant on load */
document.addEventListener('DOMContentLoaded', ()=>{
  buildList('');
  // random initial
  const idx = Math.floor(Math.random() * plantList.length);
  chooseIndex(idx);
  // ensure suggestions hidden initially
  suggestions.style.display='none';
});

/* Also allow choosing with keyboard on selectBtn */
selectBtn.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); selectBtn.click(); }
});
</script>
</body>
</html>
